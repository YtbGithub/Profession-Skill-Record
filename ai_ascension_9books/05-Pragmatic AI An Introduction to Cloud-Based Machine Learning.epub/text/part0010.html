<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" xmlns:ns="http://www.w3.org/2001/10/synthesis" xml:lang="en-us" lang="en-us">
  <head>
    <title>1 Introduction to Pragmatic AI</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<h2 class="h1" id="ch01"><span epub:type="pagebreak" id="page_3" class="calibre2"></span>1</h2>
<h2 class="h2a">Introduction to Pragmatic AI</h2>
<p class="blockquote"><em class="calibre5">Don’t mistake activity with achievement</em>.</p>
<p class="attribution">John Wooden</p>
<p class="noindent">If you are picking up this book, you are probably curious about pragmatic AI. There are no shortage of books, courses, and webinars on the latest machine learning and deep learning technique. The shortage lies in how to get a project to the place where it is even possible to use advanced techniques. This is why this book exists—to bridge the gap between theory and the real-world issues with implementing artificial intelligence (AI) projects.</p>
<p class="noindent">In many cases, it may not be feasible to train your own model because the project in which you are involved may not have some combination of time, resources, or skills to implement it. There is a better solution than to continue on a path where failure is almost certain. A pragmatic AI practitioner will use the appropriate technique for the situation. In some cases, this may mean calling an application programming interface (API) that has a pretrained model. Another pragmatic AI technique may be creating a model that is intentionally less effective because it is simpler to understand and to deploy to production.</p>
<p class="noindent">In 2009, Netflix had a famous competition in which it awarded $1 million to a team that increased the accuracy of the company’s recommendations by 10 percent. The contest was exciting and before its time in making data science mainstream. What few people know, though, is that the algorithm that won the contest was never implemented because of engineering costs (<a href="https://www.wired.com/2012/04/netflix-prize-costs/" class="calibre7">https://www.wired.com/2012/04/netflix-prize-costs/</a>). Instead, some of the algorithms from a team that had “only” an 8.43 percent improvement were used. This is a great example of how pragmatism is really the goal of many AI problems, not perfection.</p>
<p class="noindent">This book focuses on being the second-place team that actually ships its solution to production. This common thread ties this book together. Shipping code to production is the goal of this book—not being the best solution that never made it into the product.</p>
<h3 id="ch01lev1" class="calibre12"><span epub:type="pagebreak" id="page_4" class="calibre2"></span>Functional Introduction to Python</h3>
<p class="noindent">Python is a fascinating 1anguage because it is good enough at so many things. There is an argument to be made that Python is not exceptional at anything, but good enough at most things. The real strength of the language is this intentional lack of complexity. Python can be programmed in many different styles as well. It is completely possible to use Python to literally execute statements in a procedural way, line by line. Python can also be used as a complex object-oriented language with advanced features like metaclasses and multiple inheritance.</p>
<p class="noindent">When learning Python, especially in the context of data science, parts of the language are less important to focus on. An argument could even be made that many parts of the language, mainly heavy object-oriented programming, may never need to be used in the course of writing Jupyter Notebooks. Instead, an alternative approach would be to focus on functions. This section briefly introduces Python, which can be thought of as the new Microsoft Excel.</p>
<p class="noindent">One of my recent graduate students told me before he took my machine learning course he was worried about how complex the code looked. After spending a few months using Jupyter Notebook and Python, he mentioned he felt very comfortable using Python to solve data science problems. It is my strong belief, based on evidence I have seen while teaching, that all users of Excel can become users of Jupyter Notebook at Python.</p>
<p class="noindent">It is worth pointing out that in deploying code to production, Jupyter may or may not be the delivery mechanism. There is a lot of traction with new frameworks like Databricks, SageMaker, and Datalab that allow for Jupyter-based production deployments, but often the purpose of Jupyter is to do experiments.</p>
<h4 id="ch01lev1sub1" class="calibre16">Procedural Statements</h4>
<p class="noindent">The following examples assume the installation of at least Python 3.6. You can download the latest version of Python at <a href="https://www.python.org/downloads/" class="calibre7">https://www.python.org/downloads/</a>. Procedural statements are literally statements that can be issued one line at a time. Below are types of procedural statements. These statements can be run in.</p>
<ul class="calibre13">
<li class="calibre14"><p class="bullet">Jupyter Notebook</p></li>
<li class="calibre14"><p class="bullet">IPython shell</p></li>
<li class="calibre14"><p class="bullet">Python interpreter</p></li>
<li class="calibre14"><p class="bullet">Python scripts</p></li>
</ul>
<h4 id="ch01lev1sub2" class="calibre16">Printing</h4>
<p class="noindent">Python has one of the simplest forms of printing. Print is a function that accepts input and sends it to the console.</p>
<p class="pre">In [1]: print("Hello world")<br class="calibre9"/>
   ...:<br class="calibre9"/>
Hello world</p>
<h4 id="ch01lev1sub3" class="calibre16"><span epub:type="pagebreak" id="page_5" class="calibre2"></span>Create Variable and Use Variable</h4>
<p class="noindent">Variables are created by assignment. This example both assigns a variable and then prints  it by combining two statements with a semicolon. This semicolon style is common in Jupyter Notebooks but is typically frowned upon for production code and libraries.</p>
<p class="codelink"><a id="p005pro01" href="part0030_split_000.html#p005pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [2]: variable = "armbar"; print(variable)<br class="calibre9"/>
armbar</p>
<h4 id="ch01lev1sub4" class="calibre16">Multiple Procedural Statements</h4>
<p class="noindent">Complete solutions to a problem can be created by writing straight procedural code as shown. This style is reasonable for Jupyter Notebooks but is uncommon for production code.</p>
<p class="codelink"><a id="p005pro02" href="part0030_split_001.html#p005pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [3]: attack_one = "kimura"<br class="calibre9"/>
   ...: attack_two = "arm triangle"<br class="calibre9"/>
   ...: print("In Brazilian jiu-jitsu a common attack is a:", attack_one)<br class="calibre9"/>
   ...: print("Another common attack is a:", attack_two)<br class="calibre9"/>
   ...:<br class="calibre9"/>
In Brazilian jiu-jitsu a common attack is a: kimura<br class="calibre9"/>
Another common attack is a: arm triangle</p>
<h4 id="ch01lev1sub5" class="calibre16">Adding Numbers</h4>
<p class="noindent">Python can also be used as a calculator. This is a great way to get comfortable with the language; start using it instead of Microsoft Excel or a calculator app.</p>
<p class="pre">In [4]: 1+1<br class="calibre9"/>
   ...:<br class="calibre9"/>
Out[4]: 2</p>
<h4 id="ch01lev1sub6" class="calibre16">Adding Phrases</h4>
<p class="noindent">Strings can be added together.</p>
<p class="pre">In [6]: "arm" + "bar"<br class="calibre9"/>
   ...:<br class="calibre9"/>
Out[6]: 'armbar'</p>
<h4 id="ch01lev1sub7" class="calibre16">Complex Statements</h4>
<p class="noindent">More complex statements can be created that use data structures like the belts variable,  which is a list.</p>
<p class="codelink"><a id="p005pro03" href="part0030_split_002.html#p005pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [7]: belts = ["white", "blue", "purple", "brown", "black"]<br class="calibre9"/>
   ...: for belt in belts:<br class="calibre9"/>
   ...:     if "black" in belt:<br class="calibre9"/>
   ...:         print("The belt I want to earn is:", belt)<br class="calibre9"/>
   ...:     else:<br class="calibre9"/>
   ...:         print("This is not the belt I want to end up with:", belt)<br class="calibre9"/>
   ...:        <br class="calibre9"/>
This is not the belt I want to end up with: white<br class="calibre9"/>
This is not the belt I want to end up with: blue<br class="calibre9"/>
This is not the belt I want to end up with: purple<br class="calibre9"/>
This is not the belt I want to end up with: brown<br class="calibre9"/>
The belt I want to earn is: black</p>
<h4 id="ch01lev1sub8" class="calibre16"><span epub:type="pagebreak" id="page_6" class="calibre2"></span>Strings and String Formatting</h4>
<p class="noindent"><em class="calibre5">Strings</em> are a sequence of characters and they are often programmatically formatted. Almost all Python programs have strings because they can send messages to users of the program. However, there are a few core concepts to understand.</p>
<ul class="calibre13">
<li class="calibre14"><p class="bullet">Strings can be created with the single, double, and triple/double quotes.</p></li>
<li class="calibre14"><p class="bullet">Strings can be formatted.</p></li>
<li class="calibre14"><p class="bullet">One complication of strings is they can be encoded in several formats, including Unicode.</p></li>
<li class="calibre14"><p class="bullet">Many methods are available to operate on strings. In an editor or IPython shell, you can see these methods by tab completion.</p></li>
</ul>
<p class="codelink"><a id="p006pro02" href="part0030_split_004.html#p006pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [8]: basic_string = ""<br class="calibre9"/>
<br class="calibre9"/>
In [9]: basic_string.<br class="calibre9"/>
            capitalize()   encode()       format()<br class="calibre9"/>
       isalpha()      islower()      istitle()      lower()        <br class="calibre9"/>
            casefold()     endswith()     format_map()  <br class="calibre9"/>
isdecimal()    isnumeric()    isupper()      lstrip()        <br class="calibre9"/>
            center()       expandtabs()   index()        <br class="calibre9"/>
isdigit()      isprintable()  join()         maketrans()    &gt;<br class="calibre9"/>
            count()        find()         isalnum()      <br class="calibre9"/>
isidentifier() isspace()      ljust()        partition()  </p>
<h5 class="calibre17">Basic String</h5>
<p class="noindent">The most basic string is a variable that is assigned to a phrase with quotes. The quotes can be triple quotes, double quotes, or single quotes.</p>
<p class="codelink"><a id="p006pro03" href="part0030_split_005.html#p006pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [10]: basic_string = "Brazilian jiu-jitsu"</p>
<h5 class="calibre17">Splitting String</h5>
<p class="noindent">Turn a string in a list by splitting on spaces or some other thing.</p>
<p class="codelink"><a id="p006pro04" href="part0030_split_006.html#p006pro04a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [11]: #split on spaces (default)<br class="calibre9"/>
    ...: basic_string.split()<br class="calibre9"/>
Out[11]: ['Brazilian', 'jiu-jitsu']<br class="calibre9"/>
<br class="calibre9"/>
In [12]: #split on hyphen<br class="calibre9"/>
    ...: string_with_hyphen = "Brazilian-jiu-jitsu"<br class="calibre9"/>
    ...: string_with_hyphen.split("-")<br class="calibre9"/>
    ...:<br class="calibre9"/>
Out[12]: ['Brazilian', 'jiu-jitsu']</p>
<span epub:type="pagebreak" id="page_7"></span>
<h5 class="calibre17">All Capital Letters</h5>
<p class="noindent">Python has many useful built-in methods for changing strings. This is how a string is converted to all caps.</p>
<p class="codelink"><a id="p007pro01" href="part0030_split_007.html#p007pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [13]: basic_string.upper()<br class="calibre9"/>
Out[13]: 'BRAZILIAN JIU JITSU'</p>
<h5 class="calibre17">Slicing Strings</h5>
<p class="noindent">Strings can be referenced by length and sliced.</p>
<p class="codelink"><a id="p007pro02" href="part0030_split_008.html#p007pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [14]: #Get first two characters<br class="calibre9"/>
    ...: basic_string[:2]<br class="calibre9"/>
Out[14]: 'Br'<br class="calibre9"/>
In [15]: #Get length of string<br class="calibre9"/>
    ...: len(basic_string)<br class="calibre9"/>
Out[15]: 19</p>
<h5 class="calibre17">Adding Strings Together</h5>
<p class="noindent">Strings can be added together both by concatenating two strings or by assigning a variable to a string and then building up longer sentences. This style is reasonable and intuitive for Jupyter Notebooks, but for performance reasons it is better to use f-strings in production code.</p>
<p class="codelink"><a id="p007pro03" href="part0030_split_009.html#p007pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [16]: basic_string + " is my favorite Martial Art"<br class="calibre9"/>
Out[16]: 'Brazilian jiu-jitsu is my favorite Martial Art'</p>
<h5 class="calibre17">Formatting Strings in Complex Ways</h5>
<p class="noindent">One of the best ways to format a string in modern Python 3 is to use f-strings.</p>
<p class="codelink"><a id="p007pro04" href="part0030_split_010.html#p007pro04a" class="calibre7">Click here to view code image</a></p>
<p class="pre">¶ In [17]: f'I love practicing my favorite Martial Art,<br class="calibre9"/>
         {basic_string}'<br class="calibre9"/>
    ...:<br class="calibre9"/>
Out[17]: 'I love practicing my favorite Martial Art,<br class="calibre9"/>
        Brazilian jiu-jitsu'</p>
<h5 class="calibre17">Strings Can Use Triple Quotes to Wrap</h5>
<p class="noindent">It is useful to take a snippet of text and assign it to a variable. An easy way to do this in Python is by using triple quotes to wrap up the phrase.</p>
<p class="codelink"><a id="p007pro05" href="part0030_split_011.html#p007pro05a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [18]: f"""<br class="calibre9"/>
    ...: This phrase is multiple sentences long.<br class="calibre9"/>
    ...: The phrase can be formatted like simpler sentences,<br class="calibre9"/>
    ...: for example, I can still talk about my favorite<br class="calibre9"/>
         Martial Art {basic_string}<br class="calibre9"/>
    ...: """<br class="calibre9"/>
Out[18]: '\nThis phrase is multiple sentences long.\nThe phrase<br class="calibre9"/>
can be formatted like simpler sentences,\nfor example,<br class="calibre9"/>
I can still talk about<br class="calibre9"/>
my favorite Martial Art Brazilian jiu-jitsu\n'</p>
<span epub:type="pagebreak" id="page_8"></span>
<h5 class="calibre17">Line Breaks Can Be Removed with Replace</h5>
<p class="noindent">The last long line contained line breaks, which are the <strong class="calibre6">\n</strong> character, and they can be removed by using the replace method.</p>
<p class="codelink"><a id="p008pro01" href="part0030_split_012.html#p008pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [19]: f"""<br class="calibre9"/>
    ...: This phrase is multiple sentences long.<br class="calibre9"/>
    ...: The phrase can be formatted like simpler sentences,<br class="calibre9"/>
    ...: for example, I can still talk about my favorite<br class="calibre9"/>
         Martial Art {basic_string}<br class="calibre9"/>
    ...: """.replace("\n", "")<br class="calibre9"/>
Out[19]: 'This phrase is multiple sentences long.The phrase can be<br class="calibre9"/>
formatted like simpler sentences,for example, I can still talk about<br class="calibre9"/>
my favorite Martial Art Brazilian jiu-jitsu'</p>
<h5 class="calibre17">Numbers and Arithmetic Operations</h5>
<p class="noindent">Python is also a built-in calculator. Without installing any additional libraries, it can do many simple and complex arithmetic operations.</p>
<h4 id="ch01lev1sub9" class="calibre16">Adding and Subtracting Numbers</h4>
<p class="noindent">The Python language is also flexible in that it allows f-string–based formatting of a phrase.</p>
<p class="codelink"><a id="p008pro02" href="part0030_split_013.html#p008pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [20]: steps = (1+1)-1<br class="calibre9"/>
    ...: print(f"Two Steps Forward:  One Step Back = {steps}")<br class="calibre9"/>
    ...:<br class="calibre9"/>
Two Steps Forward:  One Step Back = 1</p>
<h4 id="ch01lev1sub10" class="calibre16">Multiplication with Decimals</h4>
<p class="noindent">Decimal support is also included in the language, making it straightforward to create word problems.</p>
<p class="codelink"><a id="p008pro03" href="part0030_split_014.html#p008pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [21]:<br class="calibre9"/>
    ...: body_fat_percentage = 0.10<br class="calibre9"/>
    ...: weight = 200<br class="calibre9"/>
    ...: fat_total = body_fat_percentage * weight<br class="calibre9"/>
    ...: print(f"I weight 200lbs, and {fat_total}lbs of that is fat")<br class="calibre9"/>
    ...:<br class="calibre9"/>
I weight 200lbs, and 20.0lbs of that is fat</p>
<h4 id="ch01lev1sub11" class="calibre16">Using Exponents</h4>
<p class="noindent">Using the math library, it is straightforward to call 2 to the 3rd power, as shown.</p>
<p class="pre">In [22]: import math<br class="calibre9"/>
    ...: math.pow(2,3)<br class="calibre9"/>
Out[22]: 8.0</p>
<p class="noindent"><span epub:type="pagebreak" id="page_9"></span>An alternative method would be</p>
<p class="pre">&gt;&gt;&gt; 2**3<br class="calibre9"/>
8</p>
<h4 id="ch01lev1sub12" class="calibre16">Converting Between Different Numerical Types</h4>
<p class="noindent">Be aware of many numerical forms in Python. A couple of the most common are</p>
<ul class="calibre13">
<li class="calibre14"><p class="bullet">Integers</p></li>
<li class="calibre14"><p class="bullet">Floats</p></li>
</ul>
<p class="codelink"><a id="p009pro01" href="part0030_split_015.html#p009pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [23]: number = 100<br class="calibre9"/>
    ...: num_type = type(number).__name__<br class="calibre9"/>
    ...: print(f"{number} is type [{num_type}]")<br class="calibre9"/>
    ...:<br class="calibre9"/>
100 is type [int]<br class="calibre9"/>
In [24]: number = float(100)<br class="calibre9"/>
    ...: num_type = type(number).__name__<br class="calibre9"/>
    ...: print(f"{number} is type [{num_type}]")<br class="calibre9"/>
    ...:<br class="calibre9"/>
100.0 is type [float]</p>
<h4 id="ch01lev1sub13" class="calibre16">Rounding Numbers</h4>
<p class="noindent">A decimal with many digits can be rounded to just two decimals, as shown.</p>
<p class="codelink"><a id="p009pro02" href="part0030_split_016.html#p009pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [26]: too_many_decimals = 1.912345897<br class="calibre9"/>
    ...: round(too_many_decimals, 2)<br class="calibre9"/>
Out[26]: 1.91</p>
<h4 id="ch01lev1sub14" class="calibre16">Data Structures</h4>
<p class="noindent">Python has a couple of core data structures that are used frequently.</p>
<ul class="calibre13">
<li class="calibre14"><p class="bullet">Lists</p></li>
<li class="calibre14"><p class="bullet">Dictionaries</p></li>
</ul>
<p class="noindent">Dictionaries and lists are the real workhorses of Python, but there are also other data structures like tuples, sets, counters, etc., that are worth exploring too.</p>
<h4 id="ch01lev1sub15" class="calibre16">Dictionaries</h4>
<p class="noindent">Dictionaries are good at solving many problems, much like Python. In the following example, a list of Brazilian jiu-jitsu attacks are put into a dictionary. The “key” is the attack, and the “value” is the half of the body on which the attack is made.</p>
<p class="codelink"><span epub:type="pagebreak" id="page_10"></span><a id="p010pro01" href="part0030_split_017.html#p010pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [27]: submissions = {"armbar": "upper_body",<br class="calibre9"/>
    ...:                "arm_triangle": "upper_body",<br class="calibre9"/>
    ...:                "heel_hook": "lower_body",<br class="calibre9"/>
    ...:                "knee_bar": "lower_body"}<br class="calibre9"/>
    ...:</p>
<p class="noindent">A common dictionary pattern is to iterate on a dictionary by using the items method. In this example, the key and the value are printed.</p>
<p class="codelink"><a id="p010pro02" href="part0030_split_018.html#p010pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [28]: for submission, body_part in submissions.items():<br class="calibre9"/>
    ...:     print(f"The {submission} is an attack \<br class="calibre9"/>
                on the {body_part}")<br class="calibre9"/>
    ...:    <br class="calibre9"/>
The armbar is an attack on the upper_body<br class="calibre9"/>
The arm_triangle is an attack on the upper_body<br class="calibre9"/>
The heel_hook is an attack on the lower_body<br class="calibre9"/>
The knee_bar is an attack on the lower_body</p>
<p class="noindent">Dictionaries can also be used to filter. In the example below, only the submission attacks on the upper body are displayed.</p>
<p class="codelink"><a id="p010pro03" href="part0030_split_019.html#p010pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [29]: print(f"These are upper_body submission attacks\<br class="calibre9"/>
 in Brazilian jiu-jitsu:")<br class="calibre9"/>
    ...: for submission, body_part in submissions.items():<br class="calibre9"/>
    ...:     if body_part == "upper_body":<br class="calibre9"/>
    ...:         print(submission)<br class="calibre9"/>
    ...:        <br class="calibre9"/>
These are upper_body submission attacks in Brazilian jiu-jitsu:<br class="calibre9"/>
armbar<br class="calibre9"/>
arm_triangle</p>
<p class="noindent">Dictionary keys and values can also be selected:</p>
<p class="codelink"><a id="p010pro04" href="part0030_split_020.html#p010pro04a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [30]: print(f"These are keys: {submissions.keys()}")<br class="calibre9"/>
    ...: print(f"These are values: {submissions.values()}")<br class="calibre9"/>
    ...:<br class="calibre9"/>
These are keys: dict_keys(['armbar', 'arm_triangle',<br class="calibre9"/>
        'heel_hook', 'knee_bar'])<br class="calibre9"/>
These are values: dict_values(['upper_body', 'upper_body',<br class="calibre9"/>
        'lower_body', 'lower_body'])</p>
<h4 id="ch01lev1sub16" class="calibre16">Lists</h4>
<p class="noindent">Lists are commonly used in Python. They allow for sequential collections. Lists can hold dictionaries, just as dictionaries can hold lists.</p>
<p class="codelink"><a id="p010pro05" href="part0030_split_021.html#p010pro05a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [31]: list_of_bjj_positions = ["mount", "full-guard",<br class="calibre9"/>
                                  "half-guard", "turtle",<br class="calibre9"/>
                                  "side-control", "rear-mount",<br class="calibre9"/>
                                  "knee-on-belly", "north-south",<br class="calibre9"/>
                                  "open-guard"]<br class="calibre9"/>
    ...:                          <br class="calibre9"/>
<br class="calibre9"/>
In [32]: for position in list_of_bjj_positions:<br class="calibre9"/>
    ...:     if "guard" in position:<br class="calibre9"/>
    ...:         print(position)<br class="calibre9"/>
    ...:        <br class="calibre9"/>
full-guard<br class="calibre9"/>
half-guard<br class="calibre9"/>
open-guard</p>
<p class="noindent"><span epub:type="pagebreak" id="page_11"></span>Lists can also be used to select elements by slicing.</p>
<p class="codelink"><a id="p010pro05zz" href="part0030_split_022.html#p010pro05z" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [35]: print(f'First position: {list_of_bjj_positions[:1]}')<br class="calibre9"/>
    ...: print(f'Last position: {list_of_bjj_positions[-1:]}')<br class="calibre9"/>
    ...: print(f'First three positions:\<br class="calibre9"/>
      {list_of_bjj_positions[0:3]}')<br class="calibre9"/>
    ...:<br class="calibre9"/>
First position: ['mount']<br class="calibre9"/>
Last position: ['open-guard']<br class="calibre9"/>
First three positions: ['mount', 'full-guard', 'half-guard']</p>
<h4 id="ch01lev1sub17" class="calibre16">Functions</h4>
<p class="noindent">Functions are the building blocks for data science programming in Python, but they are also a way of creating logical, testable structures. There has been a strong debate brewing for decades about whether functional programming is superior to object-oriented programming in Python. This section will not answer that question, but it will show the utility of understanding the fundamentals of functions in Python.</p>
<h5 class="calibre17">Writing Functions</h5>
<p class="noindent">Learning to write a function is the most fundamental skill to learn in Python. With a basic mastery of functions, it is possible to have an almost full command of the language.</p>
<h5 class="calibre17">Simple Function</h5>
<p class="noindent">The simplest functions just return a value.</p>
<p class="codelink"><a id="p011pro01" href="part0030_split_023.html#p011pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [1]: def favorite_martial_art():<br class="calibre9"/>
   ...:     return "bjj"<br class="calibre9"/>
In [2]: favorite_martial_art()<br class="calibre9"/>
Out[2]: "bjj"</p>
<h5 class="calibre17">Documenting Functions</h5>
<p class="noindent">It is a good idea to document functions. In Jupyter Notebook and IPython, docstrings can be viewed by referring to the function with a <code class="calibre11">?</code> character appended after the object as shown.</p>
<p class="codelink"><a id="p011pro02" href="part0030_split_024.html#p011pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [2]: favorite_martial_art_with_docstring?<br class="calibre9"/>
Signature: favorite_martial_art_with_docstring()<br class="calibre9"/>
Docstring: This function returns the name of my favorite martial art<br class="calibre9"/>
File:      ~/src/functional_intro_to_python/<br class="calibre9"/>
Type:      function</p>
<p class="noindent"><span epub:type="pagebreak" id="page_12"></span>Docstrings of functions can be printed out by referring to <code class="calibre11">__doc__</code></p>
<p class="codelink"><a id="p012pro01" href="part0030_split_025.html#p012pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [4]: favorite_martial_art_with_docstring.__doc__<br class="calibre9"/>
   ...:<br class="calibre9"/>
Out[4]: 'This function returns the name of my favorite martial art'</p>
<h5 class="calibre17">Function Arguments: Positional, Keyword</h5>
<p class="noindent">A function is most useful when arguments are passed to the function. New values for times are processed inside the function. This function is also a “positional” argument, not a keyword  argument. Positional arguments are processed in the order in which they are created.</p>
<p class="codelink"><a id="p012pro02" href="part0030_split_026.html#p012pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [5]: def practice(times):<br class="calibre9"/>
   ...:     print(f"I like to practice {times} times a day")<br class="calibre9"/>
   ...:    <br class="calibre9"/>
<br class="calibre9"/>
In [6]: practice(2)<br class="calibre9"/>
I like to practice 2 times a day<br class="calibre9"/>
<br class="calibre9"/>
In [7]: practice(3)<br class="calibre9"/>
I like to practice 3 times a day</p>
<h6 class="calibre18">Positional Arguments: Processed in Order</h6>
<p class="noindent">Positional arguments for functions are processed in the order in which they are defined. So, they are both easy to write and easy to be confused about.</p>
<p class="codelink"><a id="p012pro03" href="part0030_split_027.html#p012pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [9]: def practice(times, technique, duration):<br class="calibre9"/>
   ...:     print(f"I like to practice {technique},\<br class="calibre9"/>
                 {times} times a day, for {duration} minutes")<br class="calibre9"/>
   ...:    <br class="calibre9"/>
<br class="calibre9"/>
In [10]: practice(3, "leg locks", 45)<br class="calibre9"/>
I like to practice leg locks, 3 times a day, for 45 minutes</p>
<h6 class="calibre18">Keyword Arguments: Processed by Key or Value, and Can Have Default Values</h6>
<p class="noindent">One handy feature of keyword arguments is that you can set defaults and only change the defaults you want to change.</p>
<p class="codelink"><a id="p012pro04" href="part0030_split_028.html#p012pro04a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [12]: def practice(times=2, technique="kimura", duration=60):<br class="calibre9"/>
    ...:     print(f"I like to practice {technique},\<br class="calibre9"/>
                  {times} times a day, for {duration} minutes")<br class="calibre9"/>
In [13]: practice()<br class="calibre9"/>
I like to practice kimura, 2 times a day, for 60 minutes<br class="calibre9"/>
In [14]: practice(duration=90)<br class="calibre9"/>
I like to practice kimura, 2 times a day, for 90 minutes</p>
<h6 class="calibre18">**kwargs and *args</h6>
<p class="noindent">Both <code class="calibre11">*kwargs</code> and <code class="calibre11">*args</code> syntax allow dynamic argument passing to functions. However, these syntaxes should be used with discretion because they can make code hard to understand. This  is also a powerful technique to know how to use when appropriate.</p>
<p class="codelink"><span epub:type="pagebreak" id="page_13"></span><a id="p013pro01" href="part0030_split_029.html#p013pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [15]: def attack_techniques(**kwargs):<br class="calibre9"/>
    ...:     """This accepts any number of keyword arguments"""<br class="calibre9"/>
    ...:    <br class="calibre9"/>
    ...:     for name, attack in kwargs.items():<br class="calibre9"/>
    ...:         print(f"This is an attack I would like\<br class="calibre9"/>
                  to practice: {attack}")<br class="calibre9"/>
    ...:        <br class="calibre9"/>
<br class="calibre9"/>
In [16]: attack_techniques(arm_attack="kimura",<br class="calibre9"/>
    ...:                      leg_attack="straight_ankle_lock", neck_attack="arm_triangle")<br class="calibre9"/>
    ...:                  <br class="calibre9"/>
This is an attack I would like to practice: kimura<br class="calibre9"/>
This is an attack I would like to practice: straight_ankle_lock<br class="calibre9"/>
This is an attack I would like to practice: arm_triangle</p>
<h6 class="calibre18">Passing Dictionary of Keywords to Function</h6>
<p class="noindent"><code class="calibre11">**kwargs</code> syntax can also be used to pass in arguments all at once.</p>
<p class="codelink"><a id="p013pro02" href="part0030_split_030.html#p013pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [19]: attacks = {"arm_attack":"kimura",<br class="calibre9"/>
    ...:            "leg_attack":"straight_ankle_lock",<br class="calibre9"/>
    ...:            "neck_attack":"arm_triangle"}<br class="calibre9"/>
In [20]: attack_techniques(**attacks)<br class="calibre9"/>
This is an attack I would like to practice: kimura<br class="calibre9"/>
This is an attack I would like to practice: straight_ankle_lock<br class="calibre9"/>
This is an attack I would like to practice: arm_triangle</p>
<h6 class="calibre18">Passing Around Functions</h6>
<p class="noindent">Object-oriented programming is a popular way to program, but it isn’t the only style available in Python. For concurrency and for data science, functional programming fits as a complementary style.</p>
<p class="noindent">In this example, a function can be used inside of another function by being passed into the function itself as an argument.</p>
<p class="codelink"><a id="p013pro03" href="part0030_split_031.html#p013pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [21]: def attack_location(technique):<br class="calibre9"/>
    ...:     """Return the location of an attack"""<br class="calibre9"/>
    ...:    <br class="calibre9"/>
    ...:     attacks = {"kimura": "arm_attack",<br class="calibre9"/>
    ...:            "straight_ankle_lock":"leg_attack",<br class="calibre9"/>
    ...:            "arm_triangle":"neck_attack"}<br class="calibre9"/>
    ...:     if technique in attacks:<br class="calibre9"/>
    ...:         return attacks[technique]<br class="calibre9"/>
    ...:     return "Unknown"<br class="calibre9"/>
    ...:<br class="calibre9"/>
<br class="calibre9"/>
In [22]: attack_location("kimura")<br class="calibre9"/>
Out[22]: 'arm_attack'<br class="calibre9"/>
<br class="calibre9"/>
<br class="calibre9"/>
In [24]: attack_location("bear hug")<br class="calibre9"/>
    ...:<br class="calibre9"/>
Out[24]: 'Unknown'<br class="calibre9"/>
<br class="calibre9"/>
In [25]: def multiple_attacks(attack_location_function):<br class="calibre9"/>
    ...:     """Takes a function that categorizes attacks<br class="calibre9"/>
                 and returns location"""<br class="calibre9"/>
    ...:    <br class="calibre9"/>
    ...:     new_attacks_list = ["rear_naked_choke",<br class="calibre9"/>
             "americana", "kimura"]<br class="calibre9"/>
    ...:     for attack in new_attacks_list:<br class="calibre9"/>
    ...:         attack_location = attack_location_function(attack)<br class="calibre9"/>
    ...:         print(f"The location of attack {attack} \<br class="calibre9"/>
                         is {attack_location}")<br class="calibre9"/>
    ...:        <br class="calibre9"/>
<br class="calibre9"/>
In [26]: multiple_attacks(attack_location)<br class="calibre9"/>
The location of attack rear_naked_choke is Unknown<br class="calibre9"/>
The location of attack americana is Unknown<br class="calibre9"/>
The location of attack kimura is arm_attack</p>
<span epub:type="pagebreak" id="page_14"></span>
<h6 class="calibre18">Closures and Functional Currying</h6>
<p class="noindent"><em class="calibre5">Closures</em> are functions that contain other functions. In Python, a common way to use them is to keep track of the state. In the example below, the outer function <em class="calibre5">attack_counter</em> keeps track of counts of attacks. The inner function <em class="calibre5">attack_filter</em> uses the <em class="calibre5">“nonlocal”</em> keyword in Python3 to modify the variable in the outer function.</p>
<p class="noindent">This approach is called <em class="calibre5">functional currying.</em> It allows for a specialized function to be created from general functions. As shown, this style of function could be the basis of a simple video game  or may be used by the statistics crew of an MMA match.</p>
<p class="codelink"><a id="p014pro01" href="part0030_split_032.html#p014pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [1]: def attack_counter():<br class="calibre9"/>
   ...:     """Counts number of attacks on part of body"""<br class="calibre9"/>
   ...:     lower_body_counter = 0<br class="calibre9"/>
   ...:     upper_body_counter = 0<br class="calibre9"/>
   ...:     def attack_filter(attack):<br class="calibre9"/>
   ...:         nonlocal lower_body_counter<br class="calibre9"/>
   ...:         nonlocal upper_body_counter<br class="calibre9"/>
   ...:         attacks = {"kimura": "upper_body",<br class="calibre9"/>
   ...:            "straight_ankle_lock":"lower_body",<br class="calibre9"/>
   ...:            "arm_triangle":"upper_body",<br class="calibre9"/>
   ...:             "keylock": "upper_body",<br class="calibre9"/>
   ...:             "knee_bar": "lower_body"}<br class="calibre9"/>
   ...:         if attack in attacks:<br class="calibre9"/>
   ...:             if attacks[attack] == "upper_body":<br class="calibre9"/>
   ...:                 upper_body_counter +=1<br class="calibre9"/>
   ...:             if attacks[attack] == "lower_body":<br class="calibre9"/>
   ...:                 lower_body_counter +=1<br class="calibre9"/>
   ...:         print(f"Upper Body Attacks {upper_body_counter},\<br class="calibre9"/>
                 Lower Body Attacks {lower_body_counter}")<br class="calibre9"/>
   ...:     return attack_filter<br class="calibre9"/>
   ...:<br class="calibre9"/>
<br class="calibre9"/>
In [2]: fight = attack_counter()<br class="calibre9"/>
<br class="calibre9"/>
In [3]: fight("kimura")<br class="calibre9"/>
Upper Body Attacks 1, Lower Body Attacks 0<br class="calibre9"/>
<br class="calibre9"/>
In [4]: fight("knee_bar")<br class="calibre9"/>
Upper Body Attacks 1, Lower Body Attacks 1<br class="calibre9"/>
<br class="calibre9"/>
In [5]: fight("keylock")<br class="calibre9"/>
Upper Body Attacks 2, Lower Body Attacks 1</p>
<p class="noindent"><span epub:type="pagebreak" id="page_15"></span>Functions that Yield (Generators)  A useful style of programming is “lazy evaluation.” A generator is one example of this style. Generators yield items at a time.</p>
<p class="noindent">This example returns an “infinite” random sequence of attacks. The lazy portion comes into play in that while there is an infinite amount of values, they are only returned when the function is called.</p>
<p class="codelink"><a id="p015pro01" href="part0030_split_034.html#p015pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [6]: def lazy_return_random_attacks():<br class="calibre9"/>
   ...:     """Yield attacks each time"""<br class="calibre9"/>
   ...:     import random<br class="calibre9"/>
   ...:     attacks = {"kimura": "upper_body",<br class="calibre9"/>
   ...:            "straight_ankle_lock":"lower_body",<br class="calibre9"/>
   ...:            "arm_triangle":"upper_body",<br class="calibre9"/>
   ...:             "keylock": "upper_body",<br class="calibre9"/>
   ...:             "knee_bar": "lower_body"}<br class="calibre9"/>
   ...:     while True:<br class="calibre9"/>
   ...:         random_attack = random.choices(list(attacks.keys()))<br class="calibre9"/>
   ...:         yield random_attack<br class="calibre9"/>
   ...:        <br class="calibre9"/>
<br class="calibre9"/>
In [7]: attack = lazy_return_random_attacks()<br class="calibre9"/>
<br class="calibre9"/>
In [8]: next(attack)<br class="calibre9"/>
Out[8]: ['straight_ankle_lock']<br class="calibre9"/>
<br class="calibre9"/>
In [9]: attacks = {"kimura": "upper_body",<br class="calibre9"/>
   ...:            "straight_ankle_lock":"lower_body",<br class="calibre9"/>
   ...:            "arm_triangle":"upper_body",<br class="calibre9"/>
   ...:             "keylock": "upper_body",<br class="calibre9"/>
   ...:             "knee_bar": "lower_body"}<br class="calibre9"/>
   ...:            <br class="calibre9"/>
<br class="calibre9"/>
In [10]: for _ in range(10):<br class="calibre9"/>
    ...:     print(next(attack))<br class="calibre9"/>
    ...:    <br class="calibre9"/>
['keylock']<br class="calibre9"/>
['arm_triangle']<br class="calibre9"/>
['arm_triangle']<br class="calibre9"/>
['arm_triangle']<br class="calibre9"/>
['knee_bar']<br class="calibre9"/>
['arm_triangle']<br class="calibre9"/>
['knee_bar']<br class="calibre9"/>
['kimura']<br class="calibre9"/>
['arm_triangle']<br class="calibre9"/>
['kimura'</p>
<span epub:type="pagebreak" id="page_16"></span>
<h6 class="calibre18">Decorators: Functions That Wrap Other Functions</h6>
<p class="noindent">Another useful technique in Python is to use the decorator syntax to wrap one function with another function. In the example below, a decorator is written that adds random sleep to each function call. When combined with the previous “infinite” attack generator, it generates random sleeps between each function call.</p>
<p class="codelink"><a id="p016pro01" href="part0030_split_036.html#p016pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [12]: def randomized_speed_attack_decorator(function):<br class="calibre9"/>
    ...:     """Randomizes the speed of attacks"""<br class="calibre9"/>
    ...:    <br class="calibre9"/>
    ...:     import time<br class="calibre9"/>
    ...:     import random<br class="calibre9"/>
    ...:    <br class="calibre9"/>
    ...:     def wrapper_func(*args, **kwargs):<br class="calibre9"/>
    ...:         sleep_time = random.randint(0,3)<br class="calibre9"/>
    ...:         print(f"Attacking after {sleep_time} seconds")<br class="calibre9"/>
    ...:         time.sleep(sleep_time)<br class="calibre9"/>
    ...:         return function(*args, **kwargs)<br class="calibre9"/>
    ...:     return wrapper_func<br class="calibre9"/>
<br class="calibre9"/>
In [13]: @randomized_speed_attack_decorator<br class="calibre9"/>
    ...: def lazy_return_random_attacks():<br class="calibre9"/>
    ...:     """Yield attacks each time"""<br class="calibre9"/>
    ...:     import random<br class="calibre9"/>
    ...:     attacks = {"kimura": "upper_body",<br class="calibre9"/>
    ...:            "straight_ankle_lock":"lower_body",<br class="calibre9"/>
    ...:            "arm_triangle":"upper_body",<br class="calibre9"/>
    ...:             "keylock": "upper_body",<br class="calibre9"/>
    ...:             "knee_bar": "lower_body"}<br class="calibre9"/>
    ...:     while True:<br class="calibre9"/>
    ...:         random_attack = random.choices(list(attacks.keys()))<br class="calibre9"/>
    ...:         yield random_attack<br class="calibre9"/>
    ...:        <br class="calibre9"/>
<br class="calibre9"/>
In [14]: for _ in range(10):<br class="calibre9"/>
    ...:     print(next(lazy_return_random_attacks()))<br class="calibre9"/>
    ...:    <br class="calibre9"/>
Attacking after 1 seconds<br class="calibre9"/>
['knee_bar']<br class="calibre9"/>
Attacking after 0 seconds<br class="calibre9"/>
['arm_triangle']<br class="calibre9"/>
Attacking after 2 seconds<br class="calibre9"/>
['knee_bar']</p>
<span epub:type="pagebreak" id="page_17"></span>
<h6 class="calibre18">Using Apply in Pandas</h6>
<p class="noindent">The final lesson on functions is to make use of this knowledge on a DataFrame in Pandas. One of the more fundamental concepts in Pandas is to use <code class="calibre11">apply</code> on a column versus iterating through all of the values. In this example, all of the numbers are rounded to a whole digit.</p>
<p class="codelink"><a id="p017pro01" href="part0030_split_037.html#p017pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [1]: import pandas as pd<br class="calibre9"/>
   ...: iris = pd.read_csv('https://raw.githubusercontent.com/mwaskom/seaborn-data/master/iris.csv')<br class="calibre9"/>
   ...: iris.head()<br class="calibre9"/>
   ...:<br class="calibre9"/>
Out[1]:<br class="calibre9"/>
   sepal_length  sepal_width  petal_length  petal_width species<br class="calibre9"/>
0           5.1          3.5           1.4          0.2  setosa<br class="calibre9"/>
1           4.9          3.0           1.4          0.2  setosa<br class="calibre9"/>
2           4.7          3.2           1.3          0.2  setosa<br class="calibre9"/>
3           4.6          3.1           1.5          0.2  setosa<br class="calibre9"/>
4           5.0          3.6           1.4          0.2  setosa<br class="calibre9"/>
<br class="calibre9"/>
In [2]: iris['rounded_sepal_length'] =\<br class="calibre9"/>
        iris[['sepal_length']].apply(pd.Series.round)<br class="calibre9"/>
   ...: iris.head()<br class="calibre9"/>
   ...:<br class="calibre9"/>
Out[2]:<br class="calibre9"/>
   sepal_length  sepal_width  petal_length  petal_width species  \<br class="calibre9"/>
0           5.1          3.5           1.4          0.2  setosa  <br class="calibre9"/>
1           4.9          3.0           1.4          0.2  setosa  <br class="calibre9"/>
2           4.7          3.2           1.3          0.2  setosa  <br class="calibre9"/>
3           4.6          3.1           1.5          0.2  setosa  <br class="calibre9"/>
4           5.0          3.6           1.4          0.2  setosa  <br class="calibre9"/>
<br class="calibre9"/>
   rounded_sepal_length  <br class="calibre9"/>
0                   5.0  <br class="calibre9"/>
1                   5.0  <br class="calibre9"/>
2                   5.0  <br class="calibre9"/>
3                   5.0  <br class="calibre9"/>
4                   5.0  </p>
<p class="noindent">This was done with a built-in function, but a custom function can also be written and applied to a column. In the example below, the values are multiplied by 100. The alternative way to <span epub:type="pagebreak" id="page_18"></span>accomplish this would be to create a loop, transform the data, and then write it back. In Pandas, it is straightforward and simple to apply custom functions instead.</p>
<p class="codelink"><a id="p018pro01" href="part0030_split_038.html#p018pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [3]: def multiply_by_100(x):<br class="calibre9"/>
   ...:     """Multiplies by 100"""<br class="calibre9"/>
   ...:     return x*100<br class="calibre9"/>
   ...: iris['100x_sepal_length'] =\<br class="calibre9"/>
 iris[['sepal_length']].apply(multiply_by_100)<br class="calibre9"/>
   ...: iris.head()<br class="calibre9"/>
   ...:<br class="calibre9"/>
  <br class="calibre9"/>
   rounded_sepal_length  100x_sepal_length  <br class="calibre9"/>
0                   5.0              510.0  <br class="calibre9"/>
1                   5.0              490.0  <br class="calibre9"/>
2                   5.0              470.0  <br class="calibre9"/>
3                   5.0              460.0  <br class="calibre9"/>
4                   5.0              500.0  </p>
<h3 id="ch01lev2" class="calibre12">Using Control Structures in Python</h3>
<p class="noindent">This section describes common control structures in Python. The workhorse of control structures in regular Python is the “<code class="calibre11">for</code> loop.” One thing to be aware of, however, is that <code class="calibre11">for</code> loops are not commonly used with Pandas, so what works well for Python doesn’t fit with the paradigm in Pandas. Some examples are</p>
<ul class="calibre13">
<li class="calibre14"><p class="bullet"><code class="calibre11">For</code> loops</p></li>
<li class="calibre14"><p class="bullet"><code class="calibre11">While</code> loops</p></li>
<li class="calibre14"><p class="bullet">If/else statements</p></li>
<li class="calibre14"><p class="bullet">Try/Except</p></li>
<li class="calibre14"><p class="bullet">Generator expressions</p></li>
<li class="calibre14"><p class="bullet">List comprehensions</p></li>
<li class="calibre14"><p class="bullet">Pattern matching</p></li>
</ul>
<p class="noindent">All programs eventually need a way to control the flow of execution. This section describes some techniques to do so.</p>
<h4 id="ch01lev2sub1" class="calibre16"><code class="calibre19">for</code> Loops</h4>
<p class="noindent">The <code class="calibre11">for</code> loop is one of the most fundamental control structures in Python. One common pattern is to use the range function to generate a range of values, then to iterate on them.</p>
<p class="pre">In [4]: res = range(3)<br class="calibre9"/>
   ...: print(list(res))<br class="calibre9"/>
   ...:<br class="calibre9"/>
[0, 1, 2]<br class="calibre9"/>
In [5]: for i in range(3):<br class="calibre9"/>
   ...:     print(i)<br class="calibre9"/>
   ...:    <br class="calibre9"/>
0<br class="calibre9"/>
1<br class="calibre9"/>
2</p>
<span epub:type="pagebreak" id="page_19"></span>
<h4 class="calibre16"><code class="calibre19">For</code> Loop over List</h4>
<p class="noindent">Another common pattern is to iterate on a list.</p>
<p class="codelink"><a id="p019pro01" href="part0030_split_039.html#p019pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [6]: martial_arts = ["Sambo", "Muay Thai", "BJJ"]<br class="calibre9"/>
   ...: for martial_art in martial_arts:<br class="calibre9"/>
   ...:     print(f"{martial_art} has influenced\<br class="calibre9"/>
                  modern mixed martial arts")<br class="calibre9"/>
   ...:    <br class="calibre9"/>
Sambo has influenced modern mixed martial arts<br class="calibre9"/>
Muay Thai has influenced modern mixed martial arts<br class="calibre9"/>
BJJ has influenced modern mixed martial arts</p>
<h4 id="ch01lev2sub2" class="calibre16"><code class="calibre19">While</code> Loops</h4>
<p class="noindent">A <code class="calibre11">while</code> loop is often used as a way of looping until a condition is met. A common use of a <code class="calibre11">while</code> loop is to create an infinite loop. In the example, a <code class="calibre11">while</code> loop is used to filter a function that returns 1 of 2 types of attacks.</p>
<p class="codelink"><a id="p019pro02" href="part0030_split_040.html#p019pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [7]: def attacks():<br class="calibre9"/>
   ...:     list_of_attacks = ["lower_body", "lower_body",<br class="calibre9"/>
                 "upper_body"]<br class="calibre9"/>
   ...:     print(f"There are a total of {len(list_of_attacks)}\<br class="calibre9"/>
                  attacks coming!")<br class="calibre9"/>
   ...:     for attack in list_of_attacks:<br class="calibre9"/>
   ...:         yield attack<br class="calibre9"/>
   ...: attack = attacks()<br class="calibre9"/>
   ...: count = 0<br class="calibre9"/>
   ...: while next(attack) == "lower_body":<br class="calibre9"/>
   ...:     count +=1<br class="calibre9"/>
   ...:     print(f"crossing legs to prevent attack #{count}")<br class="calibre9"/>
   ...: else:<br class="calibre9"/>
   ...:     count +=1<br class="calibre9"/>
   ...:     print(f"This is not a lower body attack, \<br class="calibre9"/>
        I will cross my arms for #{count}")<br class="calibre9"/>
   ...:    <br class="calibre9"/>
There are a total of 3 attacks coming!<br class="calibre9"/>
crossing legs to prevent attack #1<br class="calibre9"/>
crossing legs to prevent attack #2<br class="calibre9"/>
This is not a lower body attack, I will cross my arms for #3</p>
<h4 id="ch01lev2sub3" class="calibre16"><span epub:type="pagebreak" id="page_20" class="calibre2"></span><code class="calibre19">If/Else</code></h4>
<p class="noindent"><code class="calibre11">If/Else</code> statements are a common way to branch between decisions. In the example, <code class="calibre11">if/elif</code> are used to match a branch. If there are no matches, the last <code class="calibre11">else</code> statement is run.</p>
<p class="codelink"><a id="p020pro01" href="part0030_split_041.html#p020pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [8]: def recommended_attack(position):<br class="calibre9"/>
   ...:     """Recommends an attack based on the position"""<br class="calibre9"/>
   ...:     if position == "full_guard":<br class="calibre9"/>
   ...:         print(f"Try an armbar attack")<br class="calibre9"/>
   ...:     elif position == "half_guard":<br class="calibre9"/>
   ...:         print(f"Try a kimura attack")<br class="calibre9"/>
   ...:     elif position == "full_mount":<br class="calibre9"/>
   ...:         print(f"Try an arm triangle")<br class="calibre9"/>
   ...:     else:<br class="calibre9"/>
   ...:         print(f"You’re on your own, \<br class="calibre9"/>
                 there is no suggestion for an attack")<br class="calibre9"/>
In [9]: recommended_attack("full_guard")<br class="calibre9"/>
Try an armbar attack<br class="calibre9"/>
<br class="calibre9"/>
In [10]: recommended_attack("z_guard")<br class="calibre9"/>
You’re on your own, there is no suggestion for an attack</p>
<h5 class="calibre17">Generator Expression</h5>
<p class="noindent">Generator expressions build further on the concept of yield by allowing for the lazy evaluation of a sequence. The benefit of generator expressions is that nothing is evaluated or brought into memory until it is actually evaluated. This is why the example below can be operating on an infinite sequence of random attacks that are generated.</p>
<p class="noindent">In the generator pipeline, a lower-case attack such as "<code class="calibre11">arm_triangle</code>" is converted to "<code class="calibre11">ARM_TRIANGLE</code>"; next, the underscore is removed in "<code class="calibre11">ARM TRIANGLE</code>".</p>
<p class="codelink"><a id="p020pro02" href="part0030_split_042.html#p020pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [11]: def lazy_return_random_attacks():<br class="calibre9"/>
    ...:     """Yield attacks each time"""<br class="calibre9"/>
    ...:     import random<br class="calibre9"/>
    ...:     attacks = {"kimura": "upper_body",<br class="calibre9"/>
    ...:            "straight_ankle_lock":"lower_body",<br class="calibre9"/>
    ...:            "arm_triangle":"upper_body",<br class="calibre9"/>
    ...:             "keylock": "upper_body",<br class="calibre9"/>
    ...:             "knee_bar": "lower_body"}<br class="calibre9"/>
    ...:     while True:<br class="calibre9"/>
    ...:         random_attack = random.choices(list(attacks.keys()))<br class="calibre9"/>
    ...:         yield random_attack<br class="calibre9"/>
    ...:        <br class="calibre9"/>
    ...: #Make all attacks appear as Upper Case<br class="calibre9"/>
    ...: upper_case_attacks = \<br class="calibre9"/>
                 (attack.pop().upper() for attack in \<br class="calibre9"/>
                 lazy_return_random_attacks())<br class="calibre9"/>
<br class="calibre9"/>
In [12]: next(upper_case_attacks)<br class="calibre9"/>
Out[12]: 'ARM_TRIANGLE'<br class="calibre9"/>
<br class="calibre9"/>
<br class="calibre9"/>
In [13]: ## Generator Pipeline:  One expression chains into the next<br class="calibre9"/>
    ...: #Make all attacks appear as Upper Case<br class="calibre9"/>
    ...: upper_case_attacks =\<br class="calibre9"/>
                 (attack.pop().upper() for attack in\<br class="calibre9"/>
                 lazy_return_random_attacks())<br class="calibre9"/>
    ...: #Remove the underscore<br class="calibre9"/>
    ...: remove_underscore =\<br class="calibre9"/>
                 (attack.split("_") for attack in\<br class="calibre9"/>
                 upper_case_attacks)<br class="calibre9"/>
    ...: #Create a new phrase<br class="calibre9"/>
    ...: new_attack_phrase =\<br class="calibre9"/>
                 (" ".join(phrase) for phrase in\<br class="calibre9"/>
                 remove_underscore)<br class="calibre9"/>
    ...:<br class="calibre9"/>
<br class="calibre9"/>
In [19]: next(new_attack_phrase)<br class="calibre9"/>
Out[19]: 'STRAIGHT ANKLE LOCK'<br class="calibre9"/>
<br class="calibre9"/>
In [20]: for number in range(10):<br class="calibre9"/>
    ...:     print(next(new_attack_phrase))<br class="calibre9"/>
    ...:    <br class="calibre9"/>
KIMURA<br class="calibre9"/>
KEYLOCK<br class="calibre9"/>
STRAIGHT ANKLE LOCK<br class="calibre9"/>
...</p>
<span epub:type="pagebreak" id="page_21"></span>
<h5 class="calibre17">List Comprehension</h5>
<p class="noindent">A list comprehension is syntactically similar to a generator expression, but in direct contrast, it is evaluated in memory. Additionally, it is optimized C code that can be a substantial improvement over a traditional for loop.</p>
<p class="codelink"><a id="p021pro01" href="part0030_split_043.html#p021pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [21]: martial_arts = ["Sambo", "Muay Thai", "BJJ"]<br class="calibre9"/>
new_phrases = [f"Mixed Martial Arts is influenced by \<br class="calibre9"/>
         {martial_art}" for martial_art in martial_arts]<br class="calibre9"/>
In [22]: print(new_phrases)<br class="calibre9"/>
['Mixed Martial Arts is influenced by Sambo', \<br class="calibre9"/>
'Mixed Martial Arts is influenced by Muay Thai', \<br class="calibre9"/>
'Mixed Martial Arts is influenced by BJJ']</p>
<h4 id="ch01lev2sub4" class="calibre16">Intermediate Topics</h4>
<p class="noindent">With those basics out of the way, it is important to understand not just how to “create code,” but how to create code that is “maintainable.” One way of doing this is to create a library; another way is to use code that has already been written by installing third-party libraries. In general, the idea is to minimize and break up complexity.</p>
<span epub:type="pagebreak" id="page_22"></span>
<h5 class="calibre17">Writing a Library in Python</h5>
<p class="noindent">It doesn’t take long into a project before writing a library in Python becomes important. These are the basics: In this repository there is a folder called <span class="empitalic">funclib</span>, and inside is a <span class="empitalic">__init__.py</span> file. To create a library, a module is needed in this directory with a function in it.</p>
<p class="noindent">Create a file.</p>
<p class="pre">touch funclib/funcmod.py</p>
<p class="noindent">Inside this file, a function is created.</p>
<p class="codelink"><a id="p022pro01" href="part0030_split_044.html#p022pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">"""This is a simple module"""<br class="calibre9"/>
<br class="calibre9"/>
def list_of_belts_in_bjj():<br class="calibre9"/>
    """Returns a list of the belts in Brazilian jiu-jitsu"""<br class="calibre9"/>
<br class="calibre9"/>
    belts = ["white", "blue", "purple", "brown", "black"]<br class="calibre9"/>
    return belts</p>
<h5 class="calibre17">Importing the Library</h5>
<p class="noindent">With Jupyter, if a library is directory above, <span class="empitalic">sys.path.append</span> can be added so it will be imported. Next, the module is imported using the namespace of the folder/filename/function name that was created earlier.</p>
<p class="codelink"><a id="p022pro02" href="part0030_split_045.html#p022pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [23]: import sys;sys.path.append("..")<br class="calibre9"/>
    ...: from funclib import funcmod<br class="calibre9"/>
In [24]: funcmod.list_of_belts_in_bjj()<br class="calibre9"/>
Out[24]: ['white', 'blue', 'purple', 'brown', 'black']</p>
<h5 class="calibre17">Installing Other Libraries Using pip install</h5>
<p class="noindent">Installing other libraries can be done with the <span class="empstrong">pip install</span> command. Note that conda  (<a href="https://https://conda.io/docs/user-guide/tasks/manage-pkgs.html" class="calibre7">conda.io/docs/user-guide/tasks/manage-pkgs.html</a>) is both an alternative and replacement for pip. If you are using conda, pip will work just fine, since it is a replacement for virtualenv, but it also has the ability to directly install packages.</p>
<p class="noindent">To install the pandas package:</p>
<p class="pre">pip install pandas</p>
<p class="noindent">Alternately, packages can be installed using a requirements.txt file.</p>
<p class="codelink"><a id="p022pro03" href="part0030_split_046.html#p022pro03a" class="calibre7">Click here to view code image</a></p>
<p class="pre">&gt; ca requirements.txt<br class="calibre9"/>
pylint<br class="calibre9"/>
pytest<br class="calibre9"/>
pytest-cov<br class="calibre9"/>
click<br class="calibre9"/>
jupyter<br class="calibre9"/>
nbval<br class="calibre9"/>
<br class="calibre9"/>
&gt; pip install -r requirements.txt</p>
<p class="noindent"><span epub:type="pagebreak" id="page_23"></span>Here is an example of how to use a small library in Jupyter Notebook. This is an important subtlety that is worth calling out. It is easy to create a giant spider web of procedural code in a Jupyter Notebook, and it’s a very simple fix is to create some libraries that are then tested and imported.</p>
<p class="codelink"><a id="p023pro01" href="part0030_split_047.html#p023pro01a" class="calibre7">Click here to view code image</a></p>
<p class="pre">"""This is a simple module"""<br class="calibre9"/>
<br class="calibre9"/>
import pandas as pd<br class="calibre9"/>
<br class="calibre9"/>
def list_of_belts_in_bjj():<br class="calibre9"/>
    """Returns a list of the belts in Brazilian jiu-jitsu"""<br class="calibre9"/>
<br class="calibre9"/>
    belts = ["white", "blue", "purple", "brown", "black"]<br class="calibre9"/>
    return belts<br class="calibre9"/>
<br class="calibre9"/>
def count_belts():<br class="calibre9"/>
    """Uses Pandas to count number of belts"""<br class="calibre9"/>
<br class="calibre9"/>
    belts = list_of_belts_in_bjj()<br class="calibre9"/>
    df = pd.DataFrame(belts)<br class="calibre9"/>
    res = df.count()<br class="calibre9"/>
    count = res.values.tolist()[0]<br class="calibre9"/>
    return count<br class="calibre9"/>
<br class="calibre9"/>
In [25]: from funclib.funcmod import count_belts<br class="calibre9"/>
    ...:<br class="calibre9"/>
<br class="calibre9"/>
In [26]: print(count_belts())<br class="calibre9"/>
    ...:<br class="calibre9"/>
5</p>
<h5 class="calibre17">Classes</h5>
<p class="noindent">Using classes and interacting with them can be done iteratively in Jupyter Notebook. The simplest type of class is just a name, as shown here.</p>
<p class="codelink"><a id="p023pro02" href="part0030_split_048.html#p023pro02a" class="calibre7">Click here to view code image</a></p>
<p class="pre">class Competitor: pass</p>
<p class="noindent">But, that class can be instantiated into multiple objects.</p>
<p class="codelink"><a id="p023pro02zz" href="part0030_split_049.html#p023pro02z" class="calibre7">Click here to view code image</a></p>
<p class="pre">In [27]: class Competitor: pass<br class="calibre9"/>
In [28]:<br class="calibre9"/>
    ...: conor = Competitor()<br class="calibre9"/>
    ...: conor.name = "Conor McGregor"<br class="calibre9"/>
    ...: conor.age = 29<br class="calibre9"/>
    ...: conor.weight = 155<br class="calibre9"/>
In [29]: nate = Competitor()<br class="calibre9"/>
    ...: nate.name = "Nate Diaz"<br class="calibre9"/>
    ...: nate.age = 30<br class="calibre9"/>
    ...: nate.weight = 170<br class="calibre9"/>
In [30]: def print_competitor_age(object):<br class="calibre9"/>
    ...:     """Print out age statistics about a competitor"""<br class="calibre9"/>
    ...:    <br class="calibre9"/>
    ...:     print(f"{object.name} is {object.age} years old")<br class="calibre9"/>
In [31]: print_competitor_age(nate)<br class="calibre9"/>
Nate Diaz is 30 years old<br class="calibre9"/>
In [32]:<br class="calibre9"/>
    ...: print_competitor_age(conor)<br class="calibre9"/>
Conor McGregor is 29 years old</p>
<span epub:type="pagebreak" id="page_24"></span>
<h5 class="calibre17">Differences between Classes and Functions</h5>
<p class="noindent">The key differences between classes and functions are</p>
<ul class="calibre13">
<li class="calibre14"><p class="bullet">Functions are much easier to reason about.</p></li>
<li class="calibre14"><p class="bullet">Functions (typically) have state inside the function only, whereas classes have state that persists outside the function.</p></li>
<li class="calibre14"><p class="bullet">Classes can offer a more advanced level of abstraction at the cost of complexity.</p></li>
</ul>
<h3 id="ch01lev3" class="calibre12">Final Thoughts</h3>
<p class="noindent">This chapter sets the stage for this book. It started with a brief tutorial on “functional” Python and how it can be used for machine learning application development. In later chapters, the nuts and bolts of cloud-based machine learning are covered in detail.</p>
<p class="noindent">The core components of machine learning can be broken down into a couple of broad categories. Supervised machine learning techniques are used when the correct answer is already known. An example would be to predict housing prices from previous historical data. Unsupervised machine learning techniques are used when the correct answer is not known. The most common examples of unsupervised machine learning are clustering algorithms.</p>
<p class="noindent">In the case of supervised machine learning, the data has already been labeled, and the objective is to correctly predict an outcome. From a practical point of view with AI, some techniques can make supervised machine learning even more powerful and feasible. One such approach is transfer learning, tweaking a pretrained model with a much smaller data set to fit to a new problem. Another approach is active learning, choosing which data to add to an expensive manual tagging, based on the improvements it can add.</p>
<p class="noindent">In contrast, unsupervised machine learning has no labels, and the objective is to find hidden structures in the data. There is a third type of machine learning, reinforcement learning, that is less commonly used and will not be covered in detail in this book. Reinforcement learning is often used to do things like learning to play Atari games from raw pixels or playing Go  (<a href="https://https://gogameguru.com/i/2016/03/deepmind-mastering-go.pdf" class="calibre7">gogameguru.com/i/2016/03/deepmind-mastering-go.pdf</a>). Deep learning is a machine learning technique that is often used with graphics processing unit (GPU) farms via cloud providers. Deep learning is often used to solve classification problems like image recognition, but it is also use for many other problems. There are over a dozen companies currently working on developing deep learning chips, signaling how important deep learning is becoming to machine learning practitioners.</p>
<p class="noindent"><span epub:type="pagebreak" id="page_25"></span>Two subcategories of supervised machine learning are regression and classification. Regression-based supervised learning techniques predict a continuous value. Classification-based supervised learning is focused on predicting labels based on historical data.</p>
<p class="noindent">Finally, AI will be covered in the context of both automation and the imitation of cognitive functions. Many off-the-shelf AI solutions are now available via APIs from the big technologies companies: Google, Amazon, Microsoft, and IBM. The integration of these APIs into AI projects will be covered in detail.<span epub:type="pagebreak" id="page_26"></span></p>
</body></html>
